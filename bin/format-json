#!/usr/bin/env ruby

require 'json_better_formatter'

file = ARGV.first

raise 'No file given!' unless file
raise 'Inexisting file given!' unless File.exists?(file)

begin
  JsonBetterFormatter.new(in: file).format
rescue JsonBetterFormatter::UnparseableError => e
  $stderr.puts e
  exit! 1
rescue Errno::EPIPE
  # Do nothing
end
